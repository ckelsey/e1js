!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=0)}([function(e,t,n){"use strict";n(1)},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(){var t=this;n(this,e),this.bindings={},this.components={},this.models={},this.services={},this.subscriptions={},this.ids=[],this.cleanHtml=this.cleanHtml,this.generateId=this.generateId,this.getModel=this.getModel,this.getThis=this.getThis,this.registerComponent=this.registerComponent,this.registerElement=this.registerElement,this.scan=this.scan,this.setModel=this.setModel,this.setThis=this.setThis,this.subscribe=this.subscribe,this.updateBindings=this.updateBindings;var i=this;this.observer=new window.MutationObserver(function(e){var n=Object.keys(t.components),r=function(e,n){if(e.hasAttribute&&e.querySelectorAll){e.nodeName&&e.nodeName.toLowerCase()===n&&t.components[n]._initElement(e),e.hasAttribute(n)&&t.components[n]._initElement(e);var i=e.querySelectorAll(n);if(i.length||(i=e.querySelectorAll("[".concat(n,"]"))),i.length)for(var r=0;r<i.length;r++)t.components[n]._initElement(i[r])}},s=function(e){n.forEach(function(t){r(e,t)})},o=function(e){for(var t=0;t<e.length;t++)3!==e[t].nodeType&&s(e[t])},a=function(e){console.log(i),i.bindings.forEach(function(t){t.indexOf(e)&&t.splice(t.indexOf(e),1)})},c=function(e){console.log("REMOVE",e.length);for(var t=0;t<e.length;t++)3===e[t].nodeType||e[t].hasAttribute("e1-if")||a(e[t])};e.forEach(function(e){e.addedNodes.length&&o(e.addedNodes),e.removedNodes.length&&c(e.removedNodes)})})}return r(e,[{key:"cleanHtml",value:function(e,t){e=e?e.toString().replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,""):"";var n=/<\s*\w.*?>/g.exec(e),i=window.document.createElement("div");if(null!==n){if(t&&t.parentNode){var r=window.document.createRange();r.selectNode(t),i=r.createContextualFragment(e)}else i=window.document.createRange().createContextualFragment(e);i=i.lastChild}else i.innerHTML=e,i=i.lastChild;return i}},{key:"generateId",value:function(){for(var e=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz",n=0;n<26;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t=e();this.ids.indexOf(t)>-1;)t=e();return this.ids.push(t),t}},{key:"getModel",value:function(e,t,n){var i;if(!e&&!t)return n;if(e&&t){var r=e.getAttribute(t);if(!r||"@"!==r.substring(0,1)){try{r=JSON.parse(r)}catch(e){}return r||n}i=r.substring(1,r.length)}else!e&&t&&"@"===t.substring(0,1)&&(i=t.substring(1,t.length));if(!i)return n;i=i.split(".");var s=i.shift();return this.services[s]?s=this.services[s]:(i.unshift(s),s=window),i=i.join("."),this.getThis(s,i,n)}},{key:"getThis",value:function(e,t,n){t=t&&t.toString().split?[e].concat(t.toString().split(".")):[e];var i=t.reduce(function(e,t){if(void 0===e)return n;if(-1===t.indexOf(".")&&t.indexOf("(")>-1){var i=/\((.*?)\)/g.exec(t)[1],r=i.split(",").map(function(e){return e.trim()}),s=t.split("(")[0];if("function"==typeof e[s]){return e[s].apply(e,r)}}return t?e[t]:e});return void 0===i?n:i}},{key:"isTruthy",value:function(e,t){var n=this,i=e.split(/(?:\(|\)|\|\||&&|<=|<|>=|>|===|!==)+/g).map(function(e){return e.trim()});i.sort(function(e,t){return e.length>t.length?-1:e.length<t.length?1:0}),i.forEach(function(t){if("@"===t.substring(0,1)){var i=n.getModel(null,t);e=isNaN(i)?e.split(t).join("'".concat(i,"'")):e.split(t).join(i)}});try{var r=new window.Blob(["self.onmessage=function(e){try{var t=eval(e.data); self.postMessage(t);}catch(err){self.postMessage(false)}}"],{type:"text/javascript"}),s=new window.Worker(window.URL.createObjectURL(r));s.onmessage=function(e){t(e.data)},s.postMessage(e)}catch(e){t(!1)}}},{key:"registerComponent",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){n.registerElement(t);var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i))}else t.onUpdate&&Array.isArray(t.onUpdate)&&t.onUpdate.length&&t.onUpdate.forEach(function(e){e()})},registeredElements:[],scan:function(t){var i=t.querySelectorAll(e);if(i.length)for(var r=0;r<i.length;r++)n.components[e]._initElement(i[r])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerAttribute",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){n.registerElement(t);var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i))}else t.onUpdate&&Array.isArray(t.onUpdate)&&t.onUpdate.length&&t.onUpdate.forEach(function(e){e()})},registeredElements:[],scan:function(t){var i=t.querySelectorAll("[".concat(e,"]"));if(i.length)for(var r=0;r<i.length;r++)n.components[e]._initElement(i[r])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerElement",value:function(e){var t=this;if(e&&e.attributes){e.hasAttribute("component-id")||(e.setAttribute("component-id",this.generateId()),e["component-id"]=e.getAttribute("component-id"));for(var n=e.attributes,i=0;i<n.length;i++){var r=n[i].value;if("@"===r.substring(0,1)){var s=r.split(/(?:\(|\)|\|\||&&|<=|<|>=|>|===|!==)+/g).map(function(e){return e.trim()});!function(e,n){e.forEach(function(e){var i=e.split(/\?|\:/g).map(function(e){return e.trim()})[0];t.bindings[i]||(t.bindings[i]=[]),t.bindings[i].push(n)})}(s,e)}}}}},{key:"registerService",value:function(e,t){this.services[e]=t,this.updateBindings("@"+e,t)}},{key:"scan",value:function(e){for(var t in this.components)this.components[t]&&this.components[t].scan(e)}},{key:"setModel",value:function(e,t,n){var i;if(!e&&!t)return!1;if(e&&t){var r=e.getAttribute(t);r&&"@"===r.substring(0,1)&&(i=r.substring(1,r.length))}else!e&&t&&"@"===t.substring(0,1)&&(i=t.substring(1,t.length));if(!i)return!1;var s=i;i=i.split(".");var o=i.shift();this.services[o]?o=this.services[o]:(i.unshift(o),o=window),i=i.join(".");var a=this.getThis(o,i);try{a=JSON.parse(JSON.stringify(a))}catch(e){}n&&n.substring&&"@"===n.substring(0,1)&&(n=this.getModel(null,n,n)),this.setThis(o,i,n);var c=this.getThis(o,i),u=a;try{"object"==typeof a&&"object"==typeof c?u=Object.assign(a,c):c&&(u=c)}catch(e){}return this.updateBindings("@"+s,u),c}},{key:"setThis",value:function(e,t,n){return t=t?[e].concat(t.split(".")):[e],t.reduce(function(e,i){return e||(e={}),e[i]||(e[i]={}),i?(i===t[t.length-1]&&(e[i]=n),e[i]):(e[i]=null,e)})}},{key:"subscribe",value:function(e,t){this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t)}},{key:"updateBindings",value:function(e,t){var n=this.bindings[e],i=this.subscriptions[e];if(i&&i.length&&i.forEach(function(e){e(t)}),n&&n.length&&n.forEach(function(e){Array.isArray(e.onUpdate)&&e.onUpdate.length&&e.onUpdate.forEach(function(e){e()})}),t&&"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&this.updateBindings("".concat(e,".").concat(r),t[r])}}]),e}();window.E1=new s,e.exports=window.E1,"complete"===window.document.readyState?(window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)):window.document.addEventListener("DOMContentLoaded",function(){window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)})}]);